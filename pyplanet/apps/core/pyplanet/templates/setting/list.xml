<frame pos="0 17 0">
  {% if provide_search %}
    <quad pos="0 62.5" size="220 137" z-index="-50" halign="center" valign="top" style="Bgs1InRace" substyle="BgCardList"/>
  {% else %}
    <quad pos="0 62.5" size="220 127" z-index="-50" halign="center" valign="top" style="Bgs1InRace" substyle="BgCardList"/>
  {% endif %}
  <quad pos="0 61.5" size="218 11" z-index="-49" halign="center" valign="top" style="Bgs1InRace" substyle="BgCardList"/>

  <quad pos="-108 60.5 0" size="9 9" z-index="1" style="{{ icon_style }}" substyle="{{ icon_substyle }}"/>
  <label pos="-97 57.8 0" size="190 7" z-index="2" text="$o{{ title }}" textsize="2.5" textcolor="FFFFFFF" halign="left"/>
  <label pos="92 57.6 0" size="72 5" text="$o({{ count }} items)" textsize="1.5" halign="right"/>

  <quad pos="99 59.5 0" size="7 7" z-index="1" style="Icons128x32_1" substyle="Close" action="{{ id }}__button_close"/>
  <quad pos="94 59 0" size="6 6" z-index="1" style="Icons64x64_1" substyle="Refresh" action="{{ id }}__button_refresh" />

  {% if provide_search %}
    <frame pos="-109 49.5 0" id="list_search_frame">
      <quad pos="0 0" size="218 8.5" z-index="-50" style="Bgs1InRace" substyle="BgCardList"/>
      <entry pos="2 -4.25" size="80 6" z-index="2" default="{{ search|default('Search...', True) }}"
             focusareacolor1="0003" name="search_field" selecttext="1" textsize="1.6"
             focusareacolor2="FFF2" scriptevents="1" valign="center" />
      <quad pos="83 -1.35" size="6 6" bgcolor="FFFA" style="Icons64x64_1" substyle="Maximize" action="{{ id }}__button_search" />
    </frame>
  {% endif %}

  {% if provide_search %}
    <frame pos="-109 39.5 0">
  {% else %}
    <frame pos="-109 49.5 0">
  {% endif %}
    <frame pos="0 0 0" id="list_header">
      <quad pos="0 0.1" size="218 105.2" z-index="-21" style="Bgs1InRace" substyle="BgCardList"/>
      <quad pos="0 0.2" size="218 5.2" z-index="-20" style="Bgs1InRace" substyle="BgCardList"/>
      <frame pos="0.1 -0 0">
        <label pos="0 -2.4" size="50 4.9" text="$o$fff Name" textsize="1.3" valign="center2" />
        <label pos="50 -2.4" size="20 4.9" text="$o$fff Category" textsize="1.3" valign="center2" />
        <label pos="70 -2.4" size="20 4.9" text="$o$fff Type" textsize="1.3" valign="center2" />
        <label pos="90 -2.4" size="10 4.9" text="$o$fffEmpty" textsize="1.3" valign="center2" />
        <label pos="100 -2.4" size="100 4.9" text="$o$fff Value" textsize="1.3" valign="center2" />
        <label pos="200 -2.4" size="40 4.9" text="$o$fff Actions" textsize="1.3" valign="center2" />

        {% for field in fields %}
          {% if field.sorting %}
            <label pos="{{ field.left }} -2.4" size="{{ field.width }} 4.9" text="$o$fff {{ field.name }}" textsize="1.3"
                   valign="center2" action="{{ id }}__list_header_{{ loop.index0 }}" focusareacolor1="0000" focusareacolor2="fff3" />
            {% if field._sort == 1 %}
              <quad pos="{{ field.left + field.width - 5 }} 0" z-index="2" size="5 5" style="Icons64x64_1" substyle="ShowUp2" />
            {% elif field._sort == 0 %}
              <quad pos="{{ field.left + field.width - 5 }} 0" z-index="2" size="5 5" style="Icons64x64_1" substyle="ShowDown2" />
            {% endif %}
          {% else %}
            <label pos="{{ field.left }} -2.4" size="{{ field.width }} 4.9" text="$o$fff {{ field.name }}" textsize="1.3" valign="center2" />
          {% endif %}
        {% endfor %}
      </frame>
    </frame>
    <frame pos="0.1 -4.9 0" id="list_content" z-index="1">
      {% set actions_width = (actions|length) * 5 %}
      {% for app in apps %}
        {% set outer_loop = loop %}
        <label pos="0 -2.5" size="200 5" text="$o {{ app }}" textsize="1.2" valign="center2" />
        {% for setting in data[app].settings %}
          <frame pos="0 {{ loop.index * -5 }}">
            {% if loop.index0 % 2 != 0 %}
              <quad pos="0 0" size="217.8 5" z-index="-20" bgcolor="0003"/>
            {% endif %}
            <label pos="0 -2.5" size="50 5" text="$fff    {{ setting.name }}"
                   textsize="1.2" valign="center2" />
            <label pos="50 -2.5" size="20 5" text="$fff  {{ setting.category }}"
                   textsize="1.2" valign="center2" action="{{ id }}__setting__{{ setting.app_label }}__{{ setting.key }}__category"
                   focusareacolor1="0000" focusareacolor2="fff2" />
            <label pos="70 -2.5" size="20 5" text="$fff  {{ setting.type_name }}"
                   textsize="1.2" valign="center2" />
            <label pos="90 -2.5" size="10 5" text="  {% if setting._value[1] == None %}$f33&#xf111;{% else %}$3c0&#xf10c;{% endif %}"
                   textsize="1.2" valign="center2" />
            {% if setting._value[1] != None %}
              {% if setting.type == types.str or setting.type == types.int or setting.type == types.float or setting.type == types.bool %}
                {% set setting_value = setting._value[1] %}
              {% elif setting.type == types.dict %}
                {% set setting_value = 'Dictionary, edit to show' %}
              {% elif setting.type == types.set or setting.type == types.list %}
                {% set setting_value = (setting._value[1]|length|string) + ' values, edit to show' %}
              {% else %}
                {% set setting_value = 'Unknown type ' + setting.type_name %}
              {% endif %}
            {% else %}
              {% set setting_value = '-' %}
            {% endif %}
            <label pos="100 -2.5" size="100 5" text="$fff  {{ setting_value }}"
                   textsize="1.2" valign="center2"
                   action="{{ id }}__setting__{{ setting.app_label }}__{{ setting.key }}__edit"
                   focusareacolor1="0000" focusareacolor2="fff2" />
            <label pos="200 -2.5" size="15 5" text="$fff &#xf040; Edit" textsize="1.2" valign="center2"
                   action="{{ id }}__setting__{{ setting.app_label }}__{{ setting.key }}__edit"
                   focusareacolor1="0000" focusareacolor2="fff2" />
          </frame>
        {% endfor %}
      {% endfor %}
    </frame>
    <frame pos="109 -109.5 0">
      <quad pos="0 0" size="218 7" z-index="-49" halign="center" valign="center" style="Bgs1InRace" substyle="BgCardList"/>
      <quad pos="-110 4 0" size="10 8" bgcolor="FFFA" style="Icons64x64_1" substyle="ArrowFirst" action="{{ id }}__list_button_first" />
      <quad pos="-102 4 0" size="10 8" bgcolor="FFFA" style="Icons64x64_1" substyle="ArrowFastPrev" action="{{ id }}__list_button_prev_10" />
      <quad pos="-94 4 0" size="10 8" bgcolor="FFFA" style="Icons64x64_1" substyle="ArrowPrev" action="{{ id }}__list_button_prev" />
      <quad pos="84 4 0" size="10 8" bgcolor="FFFA" style="Icons64x64_1" substyle="ArrowNext" action="{{ id }}__list_button_next" />
      <quad pos="92 4 0" size="10 8" bgcolor="FFFA" style="Icons64x64_1" substyle="ArrowFastNext" action="{{ id }}__list_button_next_10" />
      <quad pos="100 4 0" size="10 8" bgcolor="FFFA" style="Icons64x64_1" substyle="ArrowLast" action="{{ id }}__list_button_last" />
      <label pos="0 1.5 0" size="72 5" text="$fff$oPage {{ page }} / {{ pages }}" textsize="1.5" halign="center"/>
    </frame>
  </frame>
</frame>
